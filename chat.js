(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap";#dy-muse-chat-wrapper ul{list-style:none;margin:0;padding:0;min-height:160px}#dy-muse-chat-wrapper label{text-transform:initial!important;letter-spacing:initial!important}#dy-muse-chat-wrapper textarea::placeholder{text-transform:none!important}#dy-chat-screen li{font-weight:400;text-align:left}.hidden{display:none!important}#dy-muse-chat-wrapper{position:fixed;top:0;right:0;margin:0;z-index:10000000000000000;box-shadow:-4px 1px 8px 7px #0000001a;height:100%;width:80%;max-width:828px;background-color:#fff;overflow-y:scroll;font-family:var(--dy-font-family)!important;color:var(--dy-dark1);border-top-left-radius:30px;border-bottom-left-radius:30px;transition:right .3s,transform .3s;transform:translate(100%);-webkit-font-smoothing:auto;letter-spacing:0!important}#dy-muse-chat-wrapper svg{width:initial;height:initial}#dy-muse-chat-overlay{position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background:#0006;z-index:99999}#dy-chat-screen{display:flex;flex-direction:column;height:100%;width:100%}.main-loader{width:100px;height:100px;border:2px solid var(--dy-main-color);border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:rotation-muse 1s linear infinite}@keyframes rotation-muse{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dy-muse-header{border-bottom:1px solid #e4e8f0;padding:13px 16px;display:flex;align-items:center;font-family:var(--dy-font-family)!important;font-size:24px;font-weight:700;line-height:24px;gap:8px}.dy-muse-header-right{margin-left:auto;display:flex;align-items:center;gap:8px}.dy-muse-header-restart-btn{border-radius:25px;cursor:pointer;padding:8px 10px 8px 9px;background:var(--dy-light);color:var(--dy-dark2);box-shadow:0 0 4px #0000000f;transition:box-shadow .2s ease-in;border:1px solid var(--dy-light2);font-size:13px;gap:5px;height:36px;box-sizing:border-box;display:flex;justify-content:center;align-items:center}.dy-muse-header-restart-btn:hover{border:1px solid var(--dy-dark3);background:var(--dy-light);cursor:pointer}.dy-muse-header-restart-img{fill:var(--dy-dark2)}.dy-muse-header-restart-btn-text{cursor:pointer;font-weight:500;line-height:19px;margin:0!important}.dy-muse-header-close,.iframe-go-back,.iframe-close{text-align:center;box-shadow:0 0 4px #0000000f;transition:box-shadow .2s ease-in;border:1px solid var(--dy-light3)!important;border-radius:50%;cursor:pointer;height:36px;width:36px;box-sizing:border-box;display:flex;justify-content:center;align-items:center}.dy-muse-header-close:hover,.iframe-go-back:hover,.iframe-close:hover{border:1px solid var(--dy-dark3)!important;background:var(--dy-light)}.iframe-go-back-svg{width:20px!important;height:20px!important}.dy-muse-header-close-svg{width:16px!important;height:16px!important}.dy-muse-header-close-path{fill:var(--dy-dark1)}.iframe-go-back,.iframe-close{position:absolute;right:16px;top:12px;background:var(--dy-light2);z-index:10000}.iframe-go-back{left:16px;display:none}.dy-muse-header-close-path:hover{fill:var(--dy-dark1)}.dy-muse-messages{padding:24px 16px;display:flex;flex-direction:column;justify-content:space-between;flex-grow:1;overflow-y:auto;overflow-x:hidden}.dy-muse-message-list{display:flex;flex-direction:column;gap:8px}.dy-muse-message-list:after{content:"-";font-size:8px;color:var(--dy-light)!important}.dy-muse-message-item{font-size:14px;line-height:20px;max-width:500px;padding:12px 16px;border-radius:20px;font-weight:400;box-sizing:border-box;transform:translateY(10px);transition:transform .3s;animation:fade-in-muse .3s forwards;position:relative}.dy-muse-message-item.left{background-color:var(--dy-light2);color:#212125}.dy-muse-message-item.left:not(.gallery){text-align:start!important;align-self:start!important;overflow-wrap:anywhere!important}.dy-muse-message-item.left.gallery{max-width:none}.dy-muse-message-item.right{align-self:end;background-color:var(--dy-client-msg-color);color:#212125;overflow-wrap:anywhere;text-align:left}.dy-muse-message-gallery{display:flex;flex-direction:column;gap:10px;position:relative}.dy-muse-message-gallery-title{font-size:14px;font-weight:500;line-height:20px;color:var(--dy-dark2);-webkit-font-smoothing:auto}.dy-muse-message-gallery-btn{transition:box-shadow .2s ease-in;border:1px solid var(--dy-light3);cursor:pointer;position:absolute;background:var(--dy-light);width:42px;height:42px;display:flex;justify-content:center;align-items:center;border-radius:50%;top:41%;z-index:1}.dy-muse-message-gallery-btn:hover{border:1px solid var(--dy-dark3)}.dy-muse-message-gallery-btn:hover .dy-next,.dy-muse-message-gallery-btn:hover .dy-prev{fill:var(--dy-light)}.dy-muse-message-gallery-btn.dy-prev{left:1%}.dy-muse-message-gallery-btn.dy-next{right:1%}.dy-next,.dy-prev{fill:var(--dy-main-color)}.dy-muse-message-gallery-container::-webkit-scrollbar{display:none}.dy-muse-message-gallery-container{display:flex;flex-direction:row;gap:12px;color:var(--dy-dark2);scroll-behavior:smooth;-ms-overflow-style:none;scrollbar-width:none}.dy-muse-message-gallery-item{display:flex;flex-direction:column;gap:4px}.dy-muse-message-gallery-item-image{position:relative;cursor:pointer;height:202px;margin-bottom:4px}.dy-muse-message-gallery-item-image img{object-fit:cover;box-shadow:0 0 4px #0000000f;transition:box-shadow .2s ease-in;border-radius:3px;height:202px;width:158px;user-drag:none;-webkit-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-drag:none}.dy-muse-message-gallery-item-image img:hover{box-shadow:0 2px 5px #0000001a}.dy-muse-show-similiar-container{position:absolute;bottom:10px;right:7px;border-radius:20px;background:#fff;color:var(--dy-dark2);transition:width .3s cubic-bezier(.18,.89,.32,1.28);cursor:pointer;gap:5px;text-wrap:nowrap;overflow-x:hidden;width:34px;height:34px;display:flex;justify-content:center;align-items:center;border:1px solid var(--dy-light3);box-shadow:0 0 4px #0000000f;transition:box-shadow .2s ease-in}.dy-muse-show-similiar-container:hover{background:var(--dy-light);border:1px solid var(--dy-dark3)}.dy-muse-show-similiar-path{fill:var(--dy-main-color)}.dy-muse-show-similiar-text{font-size:13px;transition:opacity .2s ease-in;opacity:0;cursor:pointer;position:absolute;background:#fff;bottom:50px;right:-10px;border-radius:5px;font-size:11px;font-weight:500;padding:4px;box-shadow:0 4px 4px #00000026}.dy-muse-show-similiar-text.show{opacity:1}.dy-muse-message-gallery-container .dy-muse-message-gallery-item:last-child .dy-muse-show-similiar-text{right:0}.dy-muse-message-gallery-item-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:158px;font-size:12px!important;line-height:14.52px!important}.dy-muse-message-gallery-item-prices{display:flex;gap:5px}.dy-muse-message-gallery-item-original-price{text-decoration:line-through!important;color:var(--dy-dark3)!important}@keyframes fade-in-muse{0%{transform:translateY(10px)}to{transform:translateY(0)}}@keyframes fadeInWithOpacityMuse{0%{opacity:0}to{opacity:1}}@keyframes slideInMuse{0%{transform:scale(.8)}to{transform:scale(1)}}@keyframes fadeOutMuse{0%{opacity:1}to{opacity:0}}@keyframes slideOutMuse{0%{transform:scale(1)}to{transform:scale(.8)}}.dy-muse-footer{display:flex;flex-direction:column}.dy-muse-message-arrow-svg{width:25px!important;height:24px!important}.dy-muse-message-input{display:flex;background:#f8f8fa;padding:20px 16px 28px;height:44px;border-top:1px solid #e4e8f0;box-sizing:content-box}.dy-muse-message-input-field{width:796px;border:1px solid var(--dy-light3);overflow:hidden;transition:box-shadow .3s ease;font-family:var(--dy-font-family)!important;font-size:14px;font-weight:400;line-height:20px;outline:none;height:100%;resize:none;padding:10px 39px 12px 28px;box-sizing:border-box;border-radius:20px;min-height:44px}.dy-muse-message-input textarea::placeholder{color:var(--dy-dark2)}.dy-muse-message-input textarea:focus{outline:none;box-shadow:0 4px 4px #00000026}.dy-muse-message-input textarea:disabled{background:var(--dy-light);text-rendering:geometricPrecision}.dy-muse-message-input textarea:disabled::placeholder{color:var(--dy-light3)}.dy-muse-message-input input:disabled::placeholder{color:#00000080}.dy-muse-message-input button{display:inline-flex;justify-content:center;border:0px;cursor:pointer;border-radius:50%;position:absolute;right:20px;bottom:32px;padding:5px;background:var(--dy-main-color)!important;width:36px;height:36px;box-sizing:border-box;box-shadow:none;transition:box-shadow .2s ease-in;min-width:initial!important}.dy-muse-message-input button:hover{box-shadow:0 4px 4px #0000001a}.dy-muse-message-input-btn:disabled{box-shadow:none!important;border:none!important;opacity:.5!important}.dy-muse-message-input-btn:disabled path{fill:var(--dy-light)}.dy-muse-rounded-image{width:36px;height:36px;border-radius:50%;background:var(--dy-light);object-fit:contain;box-sizing:initial}.dy-muse-message-input-counter{font-family:var(--dy-font-family)!important;font-size:12px;font-weight:500;line-height:15px;letter-spacing:0em;text-align:right;color:var(--dy-text-color);position:absolute;bottom:8px;left:39px}.dy-muse-dot-flashing{padding:18px 16px;background-color:var(--dy-light2);border-radius:20px;width:72px;display:flex;justify-content:center;box-sizing:border-box}.dot-flashing{position:relative;width:8px;height:8px;border-radius:5px;background-color:var(--dy-dark3);color:var(--dy-dark3);animation:dot-flashing-muse 1s infinite linear alternate;animation-delay:.5s}.dot-flashing:before,.dot-flashing:after{content:"";display:inline-block;position:absolute;top:0}.dot-flashing:before{left:-15px;width:8px;height:8px;border-radius:5px;background-color:var(--dy-dark3);color:var(--dy-dark3);animation:dot-flashing-muse 1s infinite alternate;animation-delay:0s}.dot-flashing:after{left:15px;width:8px;height:8px;border-radius:5px;background-color:var(--dy-dark3) 880ff;color:var(--dy-dark3);animation:dot-flashing-muse 1s infinite alternate;animation-delay:1s}@keyframes dot-flashing-muse{0%{background-color:var(--dy-dark3)}50%,to{background-color:var(--dy-light3)}}#quick-view-overlay{position:fixed;top:0;left:0;width:100%;height:100%;z-index:999999;background:#00000080;display:flex;justify-content:center;align-items:center}#quick-view-container{position:relative;background:#fff;display:flex;width:100%;max-width:1082px;height:722px;border-radius:30px;z-index:100000000000000000;margin:20px;animation:fadeInWithOpacityMuse .3s ease-in-out;justify-content:center}#quick-view-container .main-loader{position:absolute;top:40%}#quick-view-iframe{border-radius:30px;border:none;height:100%!important;opacity:0;min-width:100%}@media (max-width: 768px){#dy-muse-chat-wrapper{bottom:0;top:initial;width:100%;max-width:none;border-radius:0;transform:translateY(100%);transition:transform .3s}.dy-muse-header-restart-btn{width:36px}.dy-muse-header-restart-btn-text{display:none}.dy-muse-header{font-size:20px;font-weight:700;line-height:24.2px;padding:8px 16px}.dy-next,.dy-prev{display:none!important}#quick-view-container{height:100%;border-radius:0;margin:0}.iframe-close{display:none}.iframe-go-back{display:flex}#quick-view-iframe{border-radius:0}}@media (max-width: 480px){.dy-muse-message-input-field{font-size:16px}}@media (max-width: 420px){.dy-muse-message-gallery-item{width:141.66px}.dy-muse-message-gallery-item-image{height:181.1px}.dy-muse-message-gallery-item-name{width:141.66px}.dy-muse-message-gallery-item-image img{border-radius:2.69px;height:181.1px;width:141.66px}.dy-muse-message-gallery-container{gap:10.76px}.dy-muse-show-similiar-container{bottom:7.17px;right:24.17px;width:32.28px;height:32.28px}}@media (max-width: 370px){.dy-muse-message-item.left.gallery{width:370px!important}}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
var ShoppingMuse=function(){"use strict";var ie=Object.defineProperty;var ne=(f,p,L)=>p in f?ie(f,p,{enumerable:!0,configurable:!0,writable:!0,value:L}):f[p]=L;var o=(f,p,L)=>(ne(f,typeof p!="symbol"?p+"":p,L),L),oe=(f,p,L)=>{if(!p.has(f))throw TypeError("Cannot "+L)};var O=(f,p,L)=>{if(p.has(f))throw TypeError("Cannot add the same private member more than once");p instanceof WeakSet?p.add(f):p.set(f,L)};var N=(f,p,L)=>(oe(f,p,"access private method"),L);var E,D;const f="#dy-welcome-screen{overflow:hidden;background-color:var(--dy-light2);width:100%;display:flex;flex-direction:column}#dy-welcome-screen .dy-muse-header{border:none}#dy-welcome-screen .dy-muse-rounded-image{width:60px;height:60px;border:none;object-fit:contain}#dy-welcome-screen .dy-muse-header-title{font-size:24px;margin-top:20px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:35ch;line-height:29.05px}.dy-welcome-profile{align-items:center;display:flex;flex-direction:column}#dy-welcome-screen .dy-muse-header-description{margin-top:12px;font-size:14px;color:var(--dy-dark2);text-align:center;line-height:20px}#dy-welcome-screen .dy-muse-message-input{margin-top:38px;padding:0;width:508px;border:none;position:relative}#dy-welcome-screen .dy-muse-message-input-btn{position:absolute;right:4px;bottom:4px}#dy-welcome-screen .dy-muse-welcome-suggestions{margin-top:38px;width:508px}.dy-welcome-screen-content{justify-content:center;align-items:center;display:flex;height:100%;flex-direction:column;padding-right:20px;padding-left:20px}.dy-muse-welcome-suggestions-list{display:flex;flex-wrap:wrap;justify-content:center;gap:8px}.dy-muse-welcome-suggestions-item{box-shadow:0 0 4px #0000000f;transition:box-shadow .2s ease-in;border:1px solid var(--dy-light2);background:var(--dy-light);color:var(--dy-dark2);width:49%;height:76px;padding:8px 24px;border-radius:20px;box-sizing:border-box;text-align:center;align-items:center;justify-content:center;display:flex;cursor:pointer;font-weight:500;font-size:small}.dy-muse-welcome-suggestions-item:hover{box-shadow:0 4px 4px #0000001a;background:var(--dy-light2)}.dy-muse-suggestions{border-top:1px solid #e4e8f0;background:#f8f8fa;padding:8px 16px;overflow-x:auto;white-space:nowrap;display:none}.dy-muse-suggestions-list{display:flex;flex-direction:row;gap:8px}.dy-muse-suggestions-item{background:var(--dy-light);box-shadow:0 0 4px #0000000f;transition:box-shadow .2s ease-in;border:1px solid var(--dy-light2);color:var(--dy-dark2);padding:8px 16px;border-radius:25px;font-size:13px;font-weight:700;line-height:19px;letter-spacing:0em;text-align:left;cursor:pointer}.dy-muse-suggestions-item:hover{box-shadow:0 4px 4px #0000001a;background:var(--dy-light2)}.dy-welcome-screen-content .dy-muse-message-input-counter{position:unset;width:508px;padding:0 39px 0 75px;text-align:left;box-sizing:content-box!important}.dy-muse-welcome-disclaimer{font-size:12px!important;text-align:center!important;color:var(--dy-dark2);position:relative;bottom:21px;line-height:19.2px!important;padding:0 20px}@media (max-width: 768px){.dy-welcome-screen-content{display:flex;flex-direction:column;align-items:center;justify-content:start;align-self:center;height:100%;width:100%;max-width:510px;margin-top:60px;padding-right:20px;padding-left:20px;box-sizing:border-box}.dy-welcome-screen-content .dy-muse-message-input-counter,#dy-welcome-screen .dy-muse-message-input,#dy-welcome-screen .dy-muse-welcome-suggestions{width:100%}.dy-muse-welcome-disclaimer{padding:0 20px}}@media (max-width: 480px){.dy-welcome-screen-content{margin-left:24px;margin-right:24px;max-width:390px}.dy-muse-welcome-suggestions-item{width:100%;height:36%;padding:8px 16px;line-height:19.02px}}",p="#dy-welcome-screen{background-color:var(--dy-light);width:100%;display:flex;flex-direction:column}.dy-welcome-screen-content{padding:12px}#dy-welcome-screen .dy-muse-header{border:none;padding:12px 16px}.dy-muse-welcome-input-wrapper{min-height:100px;display:flex;justify-content:center;align-items:center}.dy-muse-grid-container .dy-muse-message-gallery-item-image{height:100%;width:100%}.dy-muse-grid-container .dy-muse-message-gallery-item-image img{height:160px;width:100%}.dy-muse-welcome-input-wrapper.mobile,.dy-muse-welcome-disclaimer.mobile{display:none}#dy-welcome-screen .dy-muse-message-input{padding:0;width:440px;border:none;position:relative}#dy-welcome-screen .dy-muse-message-input-btn{position:absolute;right:5px;bottom:5px}.dy-muse-message-input.new-layout{background:none!important;height:52px}.dy-muse-message-input-field.new-layout{padding:5px 50px 5px 19px;width:100%;border:2px solid var(--dy-dark1);border-radius:27.45px;font-size:16px!important;line-height:22px!important;font-weight:500!important}.dy-muse-message-input-field.new-layout:focus{box-shadow:0 4px 4px #0000001a}.dy-muse-message-input-field.new-layout:focus::placeholder{padding-left:2px}.dy-muse-message-input-field.new-layout::placeholder{color:var(--dy-disabled);font-size:16px!important;line-height:22px!important;font-weight:500!important}.dy-muse-message-input-field.new-layout:disabled::placeholder{color:#cecfd0}.dy-muse-message-input-btn.new-layout{width:42px;height:42px;display:flex;align-items:center;justify-content:center}.dy-welcome-screen-content .dy-muse-message-input-counter{position:unset;width:508px;padding:0 39px 0 75px;text-align:left;box-sizing:content-box!important}.dy-muse-welcome-disclaimer{font-size:12px!important;justify-content:center;text-align:center!important;color:var(--dy-dark2);height:63px!important;line-height:19.2px!important;padding:12px 20px;font-weight:500;display:flex;flex-direction:column;gap:4px}.dy-muse-welcome-disclaimer-text{line-height:19.52px}.dy-muse-welcome-disclaimer-url{display:flex;justify-content:center;gap:10px;line-height:14.52px}.disclaimer-url{text-decoration:underline!important;color:#00e!important}.dy-muse-grid-container{display:grid;grid-gap:12px;grid-template-columns:repeat(6,1fr);grid-template-rows:repeat(4,159.81px)}.dy-muse-grid-container .dy-muse-grid-item{box-shadow:0 4px 4px #0000001a;border-radius:2px}.dy-muse-grid-container .dy-muse-grid-item:hover{box-shadow:0 6px 10px #02152d24}.suggestion-container{width:192px}.dy-muse-grid-container .dy-muse-grid-item.suggestion{background:#e1dad0;border-radius:4px;display:flex;align-items:center;padding:0 32px;cursor:pointer}.dy-muse-grid-container .dy-muse-grid-item.suggestion:hover{box-shadow:0 6px 10px #02152d24}.dy-muse-grid-item:nth-child(1){order:1;grid-column:auto;grid-row:1}.dy-muse-grid-item:nth-child(2){order:2;grid-column:auto;grid-row:1}.dy-muse-grid-item:nth-child(3){order:3;grid-column:span 2;grid-row:1}.dy-muse-grid-item:nth-child(4){order:4;grid-column:auto;grid-row:1}.dy-muse-grid-item:nth-child(5){order:5;grid-column:auto;grid-row:1}.dy-muse-grid-item:nth-child(6){order:6;grid-column:auto;grid-row:2}.dy-muse-grid-item:nth-child(9){order:7;grid-column:auto;grid-row:2}.dy-muse-grid-item:nth-child(13){order:8;grid-column:auto;grid-row:2}.dy-muse-grid-item:nth-child(10){order:9;grid-column:auto;grid-row:2}.dy-muse-grid-item:nth-child(7){order:10;grid-column:span 2;grid-row:2}.dy-muse-grid-item:nth-child(11){order:11;grid-column:auto;grid-row:3}.dy-muse-grid-item:nth-child(12){order:12;grid-column:span 2;grid-row:3}.dy-muse-grid-item:nth-child(19){order:13;grid-column:auto;grid-row:3}.dy-muse-grid-item:nth-child(14){order:14;grid-column:auto;grid-row:3}.dy-muse-grid-item:nth-child(15){order:15;grid-column:auto;grid-row:3}.dy-muse-grid-item:nth-child(16){order:16;grid-column:auto;grid-row:4}.dy-muse-grid-item:nth-child(17){order:17;grid-column:auto;grid-row:4}.dy-muse-grid-item:nth-child(18){order:18;grid-column:auto;grid-row:4}.dy-muse-grid-item:nth-child(8){order:19;grid-column:span 2;grid-row:4}.dy-muse-grid-item:nth-child(20){order:20;grid-column:auto;grid-row:4}@media (max-width: 768px){.dy-welcome-screen-content{width:100%;padding:12px;box-sizing:border-box}.dy-welcome-screen-content .dy-muse-message-input-counter{width:100%}.dy-muse-welcome-input-wrapper{border-top:2px solid var(--dy-light3);border-top-left-radius:30px;border-top-right-radius:30px;box-shadow:0 -10px 18px 0 var(--dy-light3);background:var(--dy-light)}.dy-muse-welcome-input-wrapper.desktop{display:none!important}.dy-muse-welcome-disclaimer.desktop{display:none}.dy-muse-welcome-disclaimer.mobile{display:flex}.dy-muse-welcome-input-wrapper.mobile{display:flex!important;flex-direction:column;padding:30px 20px;gap:32px}.dy-muse-welcome-input-container{width:100%;height:133px;display:flex;align-items:center;justify-content:center}.dy-muse-grid-container{grid-template-rows:repeat(4,140px);grid-template-columns:repeat(4,1fr)}.suggestion-container{width:148px}.dy-muse-grid-item:nth-child(1){order:1;grid-column:auto;grid-row:1}.dy-muse-grid-item:nth-child(3){order:2;grid-column:span 2;grid-row:1}.dy-muse-grid-item:nth-child(2){order:3;grid-column:auto;grid-row:1}.dy-muse-grid-item:nth-child(4){order:4;grid-column:auto;grid-row:2}.dy-muse-grid-item:nth-child(5){order:5;grid-column:auto;grid-row:2}.dy-muse-grid-item:nth-child(8){order:6;grid-column:span 2;grid-row:2}.dy-muse-grid-item:nth-child(7){order:7;grid-column:span 2;grid-row:3}.dy-muse-grid-item:nth-child(6){order:8;grid-column:auto;grid-row:3}.dy-muse-grid-item:nth-child(9){order:9;grid-column:auto;grid-row:3}.dy-muse-grid-item:nth-child(10){order:10;grid-column:auto;grid-row:4}.dy-muse-grid-item:nth-child(12){order:11;grid-column:span 2;grid-row:4}.dy-muse-grid-item:nth-child(11){order:12;grid-column:auto;grid-row:4}.dy-muse-grid-item:nth-child(n+13){display:none}.dy-muse-welcome-disclaimer{padding:0}.dy-muse-grid-container .dy-muse-message-gallery-item-image img{height:140px}}@media (max-width: 460px){.dy-muse-message-input.new-layout{width:100%!important}}@media (max-width: 420px){.dy-muse-show-similiar-container{right:6.17px}.dy-muse-message-gallery-item{width:100%}}",L=`<div id="dy-welcome-screen">
  <div class="dy-muse-header">
    <div class="dy-muse-header-right">
      <div class="dy-muse-header-close">
        <svg
          class="dy-muse-header-close-svg"
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            class="dy-muse-header-close-path"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0.963172 0.975438C1.25288 0.679394 1.72773 0.674256 2.02377 0.963964L7.99921 6.81149L13.9746 0.963964C14.2707 0.674257 14.7455 0.679394 15.0352 0.975438C15.325 1.27148 15.3198 1.74633 15.0238 2.03604L9.07153 7.86086L15.3081 13.964C15.6042 14.2537 15.6093 14.7285 15.3196 15.0246C15.0299 15.3206 14.5551 15.3257 14.259 15.036L7.99921 8.91023L1.73941 15.036C1.44336 15.3257 0.968515 15.3206 0.678808 15.0246C0.3891 14.7285 0.394238 14.2537 0.690282 13.964L6.92689 7.86086L0.974647 2.03604C0.678602 1.74633 0.673465 1.27148 0.963172 0.975438Z"
            fill="#68697B"
          />
        </svg>
      </div>
    </div>
  </div>
  <div class="dy-welcome-screen-content">
    <img
      class="dy-muse-rounded-image"
      draggable="false"
    />
    <div class="dy-muse-header-title"></div>
    <div class="dy-muse-header-description"></div>
    <div class="dy-muse-message-input">
      <textarea
        class="dy-muse-message-input-field"
        maxlength="140"
      ></textarea>
      <button
        type="button"
        class="dy-muse-message-input-btn"
      >
        <svg
          width="25"
          height="24"
          viewBox="0 0 25 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M7.51014 10.0393C7.80961 10.5777 8.3405 10.948 8.94919 11.0431L14.7002 11.9417C14.8023 11.9577 14.9057 11.9636 15.0088 11.9704C15.3486 11.9932 15.6036 12.1047 15.6036 12.4657C15.6036 12.8267 15.3486 12.9382 15.0088 12.9609C14.9057 12.9678 14.8023 12.9737 14.7002 12.9897L8.94919 13.8883C8.3405 13.9834 7.80961 14.3537 7.51014 14.8921L4.56519 20.1864C4.33343 20.6031 4.76088 21.0769 5.1991 20.889L23.7813 12.9253C24.1853 12.7521 24.1853 12.1793 23.7813 12.0061L5.1991 4.04232C4.76088 3.85451 4.33343 4.32829 4.56519 4.74495L7.51014 10.0393Z"
            fill="white"
          />
        </svg>
      </button>
    </div>
    <div class="dy-muse-message-input-counter"></div>
    <div class="dy-muse-welcome-suggestions">
      <ul class="dy-muse-welcome-suggestions-list"></ul>
    </div>
  </div>
  <div class="dy-muse-welcome-disclaimer">
</div>`,q=`<div id="dy-welcome-screen">
  <div class="dy-muse-header">
    <img
      class="dy-muse-rounded-image"
      draggable="false"
    />
    <div class="dy-muse-header-title"></div>
    <div class="dy-muse-header-right">      
      <div class="dy-muse-header-close">
        <svg
          class="dy-muse-header-close-svg"
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            class="dy-muse-header-close-path"
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0.963172 0.975438C1.25288 0.679394 1.72773 0.674256 2.02377 0.963964L7.99921 6.81149L13.9746 0.963964C14.2707 0.674257 14.7455 0.679394 15.0352 0.975438C15.325 1.27148 15.3198 1.74633 15.0238 2.03604L9.07153 7.86086L15.3081 13.964C15.6042 14.2537 15.6093 14.7285 15.3196 15.0246C15.0299 15.3206 14.5551 15.3257 14.259 15.036L7.99921 8.91023L1.73941 15.036C1.44336 15.3257 0.968515 15.3206 0.678808 15.0246C0.3891 14.7285 0.394238 14.2537 0.690282 13.964L6.92689 7.86086L0.974647 2.03604C0.678602 1.74633 0.673465 1.27148 0.963172 0.975438Z"
            fill="#68697B"
          />
        </svg>
      </div>
    </div>
  </div>
  <div class="dy-muse-welcome-input-wrapper desktop">
  <div class="dy-muse-message-input new-layout">
    <input
      class="dy-muse-message-input-field new-layout"
      maxlength="140"
    ></input>
    <button
      type="button"
      class="dy-muse-message-input-btn new-layout"
    >
      <svg
        width="25"
        height="24"
        viewBox="0 0 25 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M7.51014 10.0393C7.80961 10.5777 8.3405 10.948 8.94919 11.0431L14.7002 11.9417C14.8023 11.9577 14.9057 11.9636 15.0088 11.9704C15.3486 11.9932 15.6036 12.1047 15.6036 12.4657C15.6036 12.8267 15.3486 12.9382 15.0088 12.9609C14.9057 12.9678 14.8023 12.9737 14.7002 12.9897L8.94919 13.8883C8.3405 13.9834 7.80961 14.3537 7.51014 14.8921L4.56519 20.1864C4.33343 20.6031 4.76088 21.0769 5.1991 20.889L23.7813 12.9253C24.1853 12.7521 24.1853 12.1793 23.7813 12.0061L5.1991 4.04232C4.76088 3.85451 4.33343 4.32829 4.56519 4.74495L7.51014 10.0393Z"
          fill="white"
        />
      </svg>
    </button>
  </div>
  <div class="dy-muse-message-input-counter"></div>
</div>
  <div class="dy-welcome-screen-content">
    <ul class="dy-muse-grid-container">
    </ul>
  </div>
  <div class="dy-muse-welcome-input-wrapper mobile">
    <div class="dy-muse-welcome-input-container">
      <div class="dy-muse-message-input new-layout">
        <input
          class="dy-muse-message-input-field new-layout"
          maxlength="140"
        ></input>
        <button
          type="button"
          class="dy-muse-message-input-btn new-layout"
        >
          <svg
            width="25"
            height="24"
            viewBox="0 0 25 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.51014 10.0393C7.80961 10.5777 8.3405 10.948 8.94919 11.0431L14.7002 11.9417C14.8023 11.9577 14.9057 11.9636 15.0088 11.9704C15.3486 11.9932 15.6036 12.1047 15.6036 12.4657C15.6036 12.8267 15.3486 12.9382 15.0088 12.9609C14.9057 12.9678 14.8023 12.9737 14.7002 12.9897L8.94919 13.8883C8.3405 13.9834 7.80961 14.3537 7.51014 14.8921L4.56519 20.1864C4.33343 20.6031 4.76088 21.0769 5.1991 20.889L23.7813 12.9253C24.1853 12.7521 24.1853 12.1793 23.7813 12.0061L5.1991 4.04232C4.76088 3.85451 4.33343 4.32829 4.56519 4.74495L7.51014 10.0393Z"
              fill="white"
            />
          </svg>
        </button>
      </div>
      <div class="dy-muse-message-input-counter"></div>
    </div>
    <div class="dy-muse-welcome-disclaimer mobile">
      <div class="dy-muse-welcome-disclaimer-text"></div>
      <div class="dy-muse-welcome-disclaimer-url">
        <a class="disclaimer-url"></a>
        <a class="disclaimer-url"></a>
      </div>     
    </div>
  </div>
  <div class="dy-muse-welcome-disclaimer desktop">
    <div class="dy-muse-welcome-disclaimer-text"></div>
    <div class="dy-muse-welcome-disclaimer-url">
      <a class="disclaimer-url"></a>
      <a class="disclaimer-url"></a>
    </div>     
  </div>
  
</div>`,V=`<div
  id="dy-muse-chat-overlay"
  class="hidden"
></div>
<div id="dy-muse-chat-wrapper">

</div>
<div
  id="quick-view-overlay"
  class="hidden"
>
  <div id="quick-view-container">
    <div class="iframe-close">
      <svg
        class="dy-muse-header-close-svg"
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          class="dy-muse-header-close-path"
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M0.963172 0.975438C1.25288 0.679394 1.72773 0.674256 2.02377 0.963964L7.99921 6.81149L13.9746 0.963964C14.2707 0.674257 14.7455 0.679394 15.0352 0.975438C15.325 1.27148 15.3198 1.74633 15.0238 2.03604L9.07153 7.86086L15.3081 13.964C15.6042 14.2537 15.6093 14.7285 15.3196 15.0246C15.0299 15.3206 14.5551 15.3257 14.259 15.036L7.99921 8.91023L1.73941 15.036C1.44336 15.3257 0.968515 15.3206 0.678808 15.0246C0.3891 14.7285 0.394238 14.2537 0.690282 13.964L6.92689 7.86086L0.974647 2.03604C0.678602 1.74633 0.673465 1.27148 0.963172 0.975438Z"
          fill="#68697B"
        />
      </svg>
    </div>
    <div class="iframe-go-back">
      <svg
        class="iframe-go-back-svg"
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M11.4086 19.5804C11.7292 19.8427 12.2017 19.7955 12.464 19.4749C12.7263 19.1543 12.6791 18.6818 12.3585 18.4195L4.06873 11.637C3.70505 11.3394 3.91546 10.75 4.38535 10.75L18.8836 10.75C19.2978 10.75 19.6336 10.4142 19.6336 10C19.6336 9.58579 19.2978 9.25 18.8836 9.25L4.38529 9.25C3.9154 9.25 3.705 8.66057 4.06867 8.36302L12.3585 1.58045C12.6791 1.31815 12.7263 0.845633 12.464 0.525049C12.2017 0.204466 11.7292 0.157213 11.4086 0.41951L0.787011 9.10993C0.224644 9.57005 0.22464 10.4299 0.787011 10.89L11.4086 19.5804Z"
          fill="#68697B"
        />
      </svg>
    </div>
  </div>
</div>
`,G=`<div
    id="dy-chat-screen"
    class="hidden"
  >
    <div class="dy-muse-header">
      <img
        class="dy-muse-rounded-image"
        draggable="false"
      />
      <div class="dy-muse-header-title"></div>
      <div class="dy-muse-header-right">
        <div class="dy-muse-header-restart-btn hidden">
          <svg
            width="14"
            height="16"
            viewBox="0 0 14 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              class="dy-muse-header-restart-img"
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.0656 0.034452C11.4647 -0.0765372 11.8782 0.156996 11.9892 0.556062L13.2108 4.94835C13.4222 5.70858 12.8227 6.45104 12.035 6.40449L7.48392 6.13552C7.07043 6.11109 6.75504 5.75607 6.77947 5.34258C6.80391 4.92909 7.15892 4.6137 7.57241 4.63814L9.73109 4.76571C10.0179 4.78266 10.1456 4.44511 9.90022 4.29565C9.22975 3.88727 8.47516 3.62445 7.68552 3.53099C6.45868 3.38578 5.21868 3.65785 4.16532 4.30334C3.11197 4.94884 2.30661 5.93017 1.87901 7.08922C1.45142 8.24826 1.42649 9.51752 1.80825 10.6925C2.19001 11.8674 2.95622 12.8796 3.98342 13.5659C5.01062 14.2523 6.23899 14.5728 7.47058 14.4759C8.70218 14.379 9.86528 13.8702 10.7725 13.0316C11.6797 12.193 12.2781 11.0735 12.4713 9.85326C12.5361 9.44415 12.9203 9.16502 13.3294 9.22982C13.7386 9.29462 14.0177 9.6788 13.9529 10.0879C13.7069 11.6409 12.9453 13.0658 11.7907 14.1331C10.6361 15.2004 9.15576 15.8479 7.58827 15.9713C6.02079 16.0947 4.45741 15.6867 3.15007 14.8132C1.84272 13.9396 0.867543 12.6514 0.381666 11.156C-0.104211 9.66061 -0.0724873 8.04519 0.471724 6.57004C1.01594 5.0949 2.04094 3.84592 3.38158 3.02438C4.72221 2.20284 6.30039 1.85658 7.86183 2.04139C8.78999 2.15124 9.68011 2.44495 10.483 2.89864C10.7318 3.03925 11.0584 2.80762 10.9819 2.53227L10.544 0.95799C10.433 0.558923 10.6666 0.145441 11.0656 0.034452Z"
              fill="#68697B"
            />
          </svg>

          <label class="dy-muse-header-restart-btn-text">Start Again</label>
        </div>
        <div class="dy-muse-header-close">
          <svg
            class="dy-muse-header-close-svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              class="dy-muse-header-close-path"
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M0.963172 0.975438C1.25288 0.679394 1.72773 0.674256 2.02377 0.963964L7.99921 6.81149L13.9746 0.963964C14.2707 0.674257 14.7455 0.679394 15.0352 0.975438C15.325 1.27148 15.3198 1.74633 15.0238 2.03604L9.07153 7.86086L15.3081 13.964C15.6042 14.2537 15.6093 14.7285 15.3196 15.0246C15.0299 15.3206 14.5551 15.3257 14.259 15.036L7.99921 8.91023L1.73941 15.036C1.44336 15.3257 0.968515 15.3206 0.678808 15.0246C0.3891 14.7285 0.394238 14.2537 0.690282 13.964L6.92689 7.86086L0.974647 2.03604C0.678602 1.74633 0.673465 1.27148 0.963172 0.975438Z"
              fill="#68697B"
            />
          </svg>
        </div>
      </div>
    </div>
    <div class="dy-muse-messages">
      <ul class="dy-muse-message-list"></ul>
    </div>
    <div class="dy-muse-footer">
      <div class="dy-muse-message-input">
        <textarea
          maxlength="140"
          class="dy-muse-message-input-field"
        ></textarea>
        <button
          type="button"
          class="dy-muse-message-input-btn"
        >
          <svg
            class="dy-muse-message-arrow-svg"
            width="25"
            height="24"
            viewBox="0 0 25 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.51014 10.0393C7.80961 10.5777 8.3405 10.948 8.94919 11.0431L14.7002 11.9417C14.8023 11.9577 14.9057 11.9636 15.0088 11.9704C15.3486 11.9932 15.6036 12.1047 15.6036 12.4657C15.6036 12.8267 15.3486 12.9382 15.0088 12.9609C14.9057 12.9678 14.8023 12.9737 14.7002 12.9897L8.94919 13.8883C8.3405 13.9834 7.80961 14.3537 7.51014 14.8921L4.56519 20.1864C4.33343 20.6031 4.76088 21.0769 5.1991 20.889L23.7813 12.9253C24.1853 12.7521 24.1853 12.1793 23.7813 12.0061L5.1991 4.04232C4.76088 3.85451 4.33343 4.32829 4.56519 4.74495L7.51014 10.0393Z"
              fill="white"
            />
          </svg>
        </button>
      </div>
      <div class="dy-muse-message-input-counter"></div>
    </div>
  </div>`,U="welcome",I="chat",W={[I]:1,[U]:0},w={ABOUT_TO_REACH_MAX_CHARTS_LENGTH:21,API:"https://muse.dynamicyield.com",API_SUFFIX:"v1/muse",CTX_TYPE:"HOMEPAGE",CURRENCY:"$",GEO_CODE:"US",GEO_REGION_CODE:"US_VA",IMAGE:"https://cdn.dynamicyield.com/adm-static/shopping_muse_profile.png",INPUT_LINE_HEIGHT:44,MAX_CHARS_LENGTH:140,PRICE_FIELD:"price",PRICE_FORMAT:"integer, ltr",PRIMARY_PRODUCT_TEXT:"name",QUICK_VIEW_LOADER_DURATION:4e3,TITLE:"Your Shopping Muse"},$={DISCLAIMER:"can make mistakes. Consider double-checking important information.",INPUT_PLACEHOLDER:"Ask me anything",SOMETHING_WENT_WRONG:"Something went wrong, please try again...",SUGGESTION_1:"What to wear for a warm summer wedding?",SUGGESTION_2:"How to build a minimalist capsule that will last?",SUGGESTION_3:"How to dress like a popstar?",SUGGESTION_4:"Surprise me!",WELCOME_MESSAGE:"Hey there 👋 I'm here to help you find what you need."},b={CHAT_OPEN:"Shopping Muse Chat Open",MESSAGE_SENT:"Shopping Muse Message Sent",PRODUCT_CLICK:"Shopping Muse Product Click",SIMILARITY_CLICK:"Shopping Muse Similarity Click"};function F(a){var C;window.addEventListener("resize",e=>{e.isTrusted&&(a.isMobile=a.isMobileScreenSize(),a.handleMobileScreen())}),a.chatOverlay.addEventListener("click",()=>{a.closeChatHandler()}),a.quickViewOverlay.addEventListener("click",e=>{e.stopPropagation(),a.closeQuickViewModal()}),a.quickViewCloseBtn.addEventListener("click",()=>{a.closeQuickViewModal()}),a.closeChat.forEach(e=>{e.addEventListener("click",()=>{a.closeChatHandler()})}),a.startAgainBtn.addEventListener("click",()=>{a.handleRestart()}),a.sendMessageButtons.forEach((e,t)=>{e.addEventListener("click",()=>{a.onMessageSent(a.messageInputs[t].value,t)})}),a.messageInputs.forEach((e,t)=>{e.addEventListener("paste",function(s){var l;s.preventDefault();const n=(((l=s.clipboardData)==null?void 0:l.getData("text"))??"").replace(/(\r\n|\n|\r)/gm,""),r=((this.value||"")+n).slice(0,w.MAX_CHARS_LENGTH);this.value=r,a.handleInputLineHeight(e),a.handleInputCounter(e)}),e.addEventListener("keydown",function(s){s.key==="Enter"&&(s.preventDefault(),a.onMessageSent(s.target.value,t)),(s.ctrlKey||s.metaKey)&&s.key==="z"&&(s.preventDefault(),this.value=""),a.handleInputLineHeight(e),a.handleInputCounter(e)}),e.addEventListener("input",()=>{a.handleInputLineHeight(e),a.handleInputCounter(e)})}),(C=a.suggestionsList)==null||C.addEventListener("click",e=>{const t=e.target;t.tagName==="LI"&&a.onMessageSent(t.textContent,0)})}const A=a=>/^\$\{.*\}$/.test(a),Y=(a,C)=>{const{r:e,g:t,b:s}=j(a);return`rgba(${e}, ${t}, ${s}, ${C})`},X=a=>a.replace(/</g,"&lt;").replace(/>/g,"&gt;"),k=a=>({id:a==null?void 0:a.id,type:a==null?void 0:a.type,slots:a==null?void 0:a.slots,isContextAware:a==null?void 0:a.isContextAware}),j=a=>{const C=a.slice(1);return{b:parseInt(C.slice(4,6),16),g:parseInt(C.slice(2,4),16),r:parseInt(C.slice(0,2),16)}},_=(a,C)=>{a.disabled=C},H=(a,C,e)=>{const t=parseFloat(String(C).replace(/,/g,"")),d=!Number.isInteger(t),n=a.includes("rtl");let i;if(d?a.includes("decimal")?i=t.toFixed(2):i=Math.floor(t).toString():(i=Math.floor(t).toString(),a.includes("decimal")&&(i+=".00")),i.length>3){const r=i.split(".");r[0]=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i=r.join(".")}return n?`${i}${e}`:(d&&!a.includes("decimal")&&([i]=i.split(".")),`${e}${i}`)},B=(a,C)=>{const e={"Content-Type":"application/json"};return C&&(e.Dyid=C),{body:JSON.stringify(a),headers:e,method:"POST"}};class Z extends EventTarget{constructor(e){super();O(this,E);o(this,"ABOUT_TO_REACH_MAX_CHARTS");o(this,"museApiUrl");o(this,"galleryCounter",0);o(this,"isWelcomeScreen",!0);o(this,"isFirstTimeChatInit",!0);o(this,"isStartAgainShown",!1);o(this,"isLoading",!1);o(this,"isChatOpened",!1);o(this,"isMessageBeingSent",!1);o(this,"requestStack",[]);o(this,"isMobile",this.isMobileScreenSize());o(this,"isNewLayout",!1);o(this,"iframeInterval",null);o(this,"initialSettings");o(this,"isQuickViewEnabled",!1);o(this,"isTestModeEnabled",!1);o(this,"chatOverlay",null);o(this,"chatMainWrapper",null);o(this,"closeChat",null);o(this,"messageInputs",null);o(this,"sendMessageButtons",null);o(this,"newLayoutSuggestionsList",null);o(this,"welcomeInput",null);o(this,"welcomeMessage",null);o(this,"quickViewCloseBtn",null);o(this,"quickViewOverlay",null);o(this,"quickViewContainer",null);o(this,"quickViewIframe");o(this,"welcomeScreen",null);o(this,"chatScreen",null);o(this,"suggestionsList",null);o(this,"suggestionsContainer",null);o(this,"startAgainBtn",null);o(this,"msgCharCounter",null);o(this,"messagesList",null);o(this,"image",null);o(this,"messageInputContainer",null);o(this,"messageInputPreviousHeight",0);o(this,"sectionId","");o(this,"geoCode");o(this,"geoRegionCode");o(this,"dyid");o(this,"lng");o(this,"ctx");o(this,"ctxType");o(this,"isLocalhost",window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1");o(this,"urlParams");o(this,"widgetId","");o(this,"feedId","");o(this,"priceField","");o(this,"previousPriceColumn","");o(this,"primaryProductText","");o(this,"currency",w.CURRENCY);o(this,"elementsToHide");o(this,"selectedStrategy");o(this,"font","");o(this,"quickViewLoaderDuration");o(this,"pageOverflow","auto");o(this,"disclaimer");o(this,"priceFormat",w.PRICE_FORMAT);o(this,"suggestions",[]);o(this,"similarItemsResponse");o(this,"selectedItem");this.initialSettings=e,this.urlParams=new URLSearchParams(window.location.search),this.isNewLayout=!0,this.injectHTML(),this.setElementsToVariables(),this.setGlobalVariablesFromSettings(),this.setGlobalStyleVariables(this.chatMainWrapper),this.setGlobalStyleVariables(this.quickViewContainer),this.setPageOverflow(),this.setNewLayout(),F(this)}setPageOverflow(){const e=window.getComputedStyle(document.body);this.pageOverflow=e==null?void 0:e.overflow}setNewLayout(){var n,i,r;if(!this.isNewLayout)return;let e=[];const t=((i=(n=window==null?void 0:window.DYO)==null?void 0:n.rcom)==null?void 0:i.widgets)??{},s=Object.keys(t),d=Number(s==null?void 0:s[0]);(r=window==null?void 0:window.DYO)==null||r.recommendationWidgetData(d,{maxProducts:16},(l,c)=>{const{slots:m}=c;e=m,console.log("slots",m),console.log("products",e),console.log("error",l),[2,6,7,11].forEach((u,y)=>{const v={suggestion:this.suggestions[y]};e.splice(u,0,v)});const g=document.querySelector(".dy-muse-grid-container");this.createWelcomeItemsToContainer(e,g)}),console.log("outer products",e)}setElementsToVariables(){this.chatOverlay=document.getElementById("dy-muse-chat-overlay"),this.chatMainWrapper=document.getElementById("dy-muse-chat-wrapper"),this.closeChat=document.querySelectorAll(".dy-muse-header-close"),this.messageInputs=document.querySelectorAll(".dy-muse-message-input-field"),this.sendMessageButtons=document.querySelectorAll(".dy-muse-message-input-btn"),this.quickViewCloseBtn=document.querySelector(".iframe-close"),this.quickViewOverlay=document.getElementById("quick-view-overlay"),this.quickViewContainer=document.getElementById("quick-view-container"),this.welcomeScreen=document.getElementById("dy-welcome-screen"),this.chatScreen=document.getElementById("dy-chat-screen"),this.suggestionsContainer=document.querySelector(".dy-muse-welcome-suggestions"),this.suggestionsList=document.querySelector(".dy-muse-welcome-suggestions-list"),this.startAgainBtn=document.querySelector(".dy-muse-header-restart-btn"),this.msgCharCounter=document.querySelectorAll(".dy-muse-message-input-counter"),this.messagesList=document.querySelector(".dy-muse-message-list"),this.image=document.querySelector(".dy-muse-message-gallery-item-image")}setGlobalVariablesFromSettings(){const{name:e,image:t,maxChartsLimit:s,priceField:d,previousPriceColumn:n,isQuickViewEnabled:i,isTestModeEnabled:r,currencySymbol:l,elementsToHide:c,quickViewLoaderDuration:m,selectedStrategy:h,disclaimer:g,suggestion1:u,suggestion2:y,suggestion3:v,suggestion4:x,similarItemsResponse:S,suggestion5:T,suggestion6:P,font:R,primaryProductText:M,disclaimerText1:z,disclaimerText2:Q,disclaimerUrl1:K,disclaimerUrl2:J,welcomeMessage:ee,placeholderText:te,priceFormat:se}=this.initialSettings;this.setCoreSettings(),this.setCustomCSS(c),this.setMuseChatApiUrl(),this.setQuickViewLoaderDuration(m),this.setChatTitleAndLogo(e,t),this.setPriceFields(d,n),this.setProductText(M),this.setPriceFormat(se),this.setFont(R),this.setDefaultCurrency(l),this.setMaxChartsLimit(s),this.setIsQuickViewEnabled(i),this.setIsTestModeEnabled(r),this.setWelcomeMessage(ee),this.setDisclaimer(g,z,Q,K,J),this.setSuggestions(u,y,v,x,T,P),this.setSimilarItemsResponse(S),this.setSelectedStrategy(h),this.setPlaceholderText(te)}setCoreSettings(){var l,c,m,h,g,u,y,v,x;const{feedId:e,widgetId:t,sectionId:s,geoCode:d,geoRegionCode:n,dyid:i,ctxType:r}=this.initialSettings;this.geoCode=d??((l=window.DY)==null?void 0:l.geoCode),this.geoRegionCode=n??((c=window.DY)==null?void 0:c.geoRegionCode),this.dyid=i??((m=window.DY)==null?void 0:m.dyid)??((g=(h=window.DYO)==null?void 0:h.UserUtils)==null?void 0:g.getDyid()),this.ctxType=r??((y=(u=window.DY)==null?void 0:u.recommendationContext)==null?void 0:y.type),this.ctx=(v=window.DY)==null?void 0:v.recommendationContext,this.sectionId=s??((x=window.DYO)==null?void 0:x.section),this.widgetId=t,this.feedId=e}setSuggestions(e,t,s,d,n,i){this.suggestions=[e,t,s,d],n&&this.suggestions.push(n),i&&this.suggestions.push(i)}setSelectedStrategy(e){this.selectedStrategy=e}setSimilarItemsResponse(e=""){this.similarItemsResponse=e}setPriceFormat(e=w.PRICE_FORMAT){this.priceFormat=e}setMuseChatApiUrl(){var t,s;const e=((s=(t=window.DYO)==null?void 0:t.hosts)==null?void 0:s.museServerExternalHost)||w.API;this.museApiUrl=`${e}/${w.API_SUFFIX}`}setWelcomeMessage(e=""){const t=document.querySelector(".dy-muse-header-description");t&&(t.innerHTML=e)}setPlaceholderText(e=""){this.messageInputs.forEach(t=>{t.placeholder=e})}setIsQuickViewEnabled(e){e?this.isQuickViewEnabled=A(e)?!1:!!e:this.isQuickViewEnabled=!1}setFont(e){this.font=e}setIsTestModeEnabled(e){this.isTestModeEnabled=e??!1}setDisclaimer(e="",t,s,d,n){const i=this.isNewLayout?".dy-muse-welcome-disclaimer-text":".dy-muse-welcome-disclaimer",r=document.querySelectorAll(i);r.length>0&&r.forEach(m=>{m.innerHTML=e});const l=document.querySelectorAll(".disclaimer-url"),c=[{href:d,text:t},{href:n,text:s}];l.forEach((m,h)=>{const g=c[h%c.length];if(g!=null&&g.text&&(g!=null&&g.href)){m.innerHTML=g.text;let{href:u}=g;!(u!=null&&u.startsWith("http://"))&&!(u!=null&&u.startsWith("https://"))&&(u=`https://${u}`),m.setAttribute("href",u)}})}setPriceFields(e,t=""){this.priceField=e||w.PRICE_FIELD,this.previousPriceColumn=A(t)?"":t}setProductText(e){this.primaryProductText=e||w.PRIMARY_PRODUCT_TEXT}setCustomCSS(e){e&&(typeof e=="string"?this.elementsToHide=e:Array.isArray(e)&&(this.elementsToHide=e.join(", ")))}setQuickViewLoaderDuration(e){this.quickViewLoaderDuration=e||1}setDefaultCurrency(e){this.currency=e}setMaxChartsLimit(e=w.MAX_CHARS_LENGTH){this.ABOUT_TO_REACH_MAX_CHARTS=e-w.ABOUT_TO_REACH_MAX_CHARTS_LENGTH}setChatTitleAndLogo(e,t){const s=document.querySelectorAll(".dy-muse-header-title"),d=document.querySelectorAll(".dy-muse-rounded-image");s.forEach((n,i)=>{n.innerHTML=e,d!=null&&d[i]&&(d[i].src=t)})}setGlobalStyleVariables(e){const t=e,{color:s="#2b3bde",secondaryColor:d,textColor:n="#68697B",lightColor:i="#fff",light2Color:r="#F8F8FA",light3Color:l="#e4e8f0",dark1Color:c="#212125",dark2Color:m="#68697b",dark3Color:h="#a4a4b6",disabledColor:g="#9D9EA1",alpha:u=.2}=this.initialSettings,y=d||Y(s,u);t.style.setProperty("--dy-main-color",s),t.style.setProperty("--dy-client-msg-color",y),t.style.setProperty("--dy-text-color",n),t.style.setProperty("--dy-light",i),t.style.setProperty("--dy-light2",r),t.style.setProperty("--dy-light3",l),t.style.setProperty("--dy-dark1",c),t.style.setProperty("--dy-dark2",m),t.style.setProperty("--dy-dark3",h),t.style.setProperty("--dy-disabled",g),this.isNewLayout?t.style.setProperty("--dy-font-family",this.font):t.style.setProperty("--dy-font-family","Inter")}handleQuickViewClicked(e){const t=document.createElement("iframe");t.id="quick-view-iframe",t.width="100%",t.height="100%",t.setAttribute("sandbox","allow-same-origin allow-scripts allow-forms allow-popups allow-modals"),this.quickViewContainer.appendChild(t),this.quickViewIframe=t;const d=["https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame1-w77Z23MJ.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame2-9XNVItlX.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame3-R1DYClyH.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame4-sj9A5yLv.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame5-rPaH2h2j.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame6-JL8jgxHS.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame7-mNgfuBcZ.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame8-25_RIlkR.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/Frame9-3M1zJKqC.png","https://cdn-dev.dynamicyield.com/shopping-muse/chat/assets/image11--GCUvZzH.png"],n=l=>{const c=Math.floor(Math.random()*l.length);return l[c]};let i=e.url;this.isTestModeEnabled&&(i=n(d)),this.quickViewOverlay.classList.remove("hidden"),this.chatMainWrapper.style.zIndex="999999";const r=document.createElement("span");r.className="main-loader",this.quickViewContainer.appendChild(r),fetch(i).then(l=>l.text()).then(l=>{const c=this.quickViewIframe.contentDocument;c.open(),c.write(l);const m=document.createElement("style");m.id="dy-muse-css",this.elementsToHide&&(m.innerText=`${this.elementsToHide} {display: none !important;}`),c==null||c.head.appendChild(m),c.close(),setTimeout(()=>{this.quickViewContainer.removeChild(r),this.quickViewIframe.style.opacity="1"},this.quickViewLoaderDuration);let h=0;const g=30,y=setInterval(()=>{var v,x,S,T;(x=(v=this.quickViewIframe.contentWindow)==null?void 0:v.DY)!=null&&x.API&&(this.quickViewIframe.contentWindow.DY.API("sub",{callback:(P,R,M)=>{M.dyType==="add-to-cart-v1"&&(this.closeQuickViewModal(),this.completeTheLock(e))},on:"dy-event"}),h++),(h>=g||(T=(S=this.quickViewIframe.contentWindow)==null?void 0:S.DY)!=null&&T.API)&&clearInterval(y)},200)})}closeQuickViewModal(){setTimeout(()=>{var e,t;(e=this.quickViewContainer)==null||e.removeChild(this.quickViewIframe),(t=this.quickViewOverlay)==null||t.classList.add("hidden"),this.chatMainWrapper.style.zIndex="1000000000000000",this.isNewLayout&&this.isWelcomeScreen&&this.onShowSimilarClick(this.selectedItem)},100)}injectHTML(){const e=document.createElement("div"),t=document.createElement("div"),s=document.createElement("div");e.innerHTML=V,document.body.appendChild(e),t.innerHTML=this.isNewLayout?q:L,s.innerHTML=G;const d=document.getElementById("dy-muse-chat-wrapper");d==null||d.appendChild(t.firstChild),d==null||d.appendChild(s.firstChild);const n=document.createElement("style");n.id="dy-muse-style",n.innerHTML=this.isNewLayout?p:f,document.head.appendChild(n)}openDyChat(){var e;(e=this.urlParams)!=null&&e.get("dyIsPreview")&&window.self!==window.top||(this.isChatOpened||(this.isFirstTimeChatInit&&(this.startWelcomePageLoader(),this.initChat()),this.sendDyEvent(b.CHAT_OPEN),this.isWelcomeScreen=!0,this.chatOverlay.classList.remove("hidden"),this.chatMainWrapper.style.display="flex",this.chatMainWrapper.style.transform="",document.body.style.overflow="hidden",setTimeout(()=>{this.isMobile?this.chatMainWrapper.style.transform="translateY(0)":this.chatMainWrapper.style.transform="translateX(0)"},200)),this.isChatOpened=!0)}sendDyEvent(e){var t;(t=window.DY)!=null&&t.API&&!this.isLocalhost&&window.DY.API("event",{name:e})}async initChat(){this.cleanChat(),this.createSuggestions(),this.isFirstTimeChatInit=!1,this.stopWelcomePageLoader()}handleRestart(){this.messageInputs[0].value="",this.messageInputs[1].value="",this.cleanChat(),this.moveToWelcomeScreen(),this.requestStack=[]}cleanChat(){this.removeItems(this.messagesList),this.hideStartAgain(),this.isMessageBeingSent=!1,this.galleryCounter=0,this.setMsgCharCounters()}disableInput(e){const t=W[I];_(this.sendMessageButtons[t],e),_(this.messageInputs[t],e)}createSystemMessage(e){const t=document.createElement("li");t.classList.add("dy-muse-message-item","left"),t.innerHTML=e,this.messagesList.appendChild(t)}sendClientMessageToChat(e){const t=document.createElement("li");t.classList.add("dy-muse-message-item","right"),t.innerHTML=X(e),this.messagesList.appendChild(t),this.showStartAgain()}createSuggestions(){this.isNewLayout||this.suggestions.forEach(e=>{var s;const t=document.createElement("li");t.className="dy-muse-welcome-suggestions-item",t.textContent=e,(s=this.suggestionsList)==null||s.appendChild(t)})}async completeTheLock(e){this.isMessageBeingSent=!0,this.moveToChatScreen(),this.showStartAgain();const t=e[this.primaryProductText];this.createSystemMessage(`Great! ${t} was added to your cart.`),this.scrollToBottom(),this.startLoader(1e3),this.scrollToBottom(),await this.delay(2e3),this.scrollToBottom(),this.createSystemMessage("How about some items to complete the look?"),this.disableInput(!0),this.scrollToBottom(),this.startLoader(),this.scrollToBottom();const s=`Complete the look to ${t}, the item is from category ${e.categories}`,d=await this.fetchChatData(s.slice(0,w.MAX_CHARS_LENGTH));d&&this.sendServerMessagesToChat(d,!1),this.stopLoader()}closeChatHandler(){document.body.style.overflow=this.pageOverflow,this.isChatOpened=!1,this.isMessageBeingSent=!1,this.chatOverlay.classList.add("hidden"),this.isMobile?this.chatMainWrapper.style.transform="translateY(100%)":this.chatMainWrapper.style.transform="translateX(100%)",setTimeout(()=>{this.chatMainWrapper.style.display="none"},300),N(this,E,D).call(this)}handleInputCounter(e){const t=e.value;t.length>this.ABOUT_TO_REACH_MAX_CHARTS?t.length>w.MAX_CHARS_LENGTH?this.setMsgCharCounters(`${w.MAX_CHARS_LENGTH}/${w.MAX_CHARS_LENGTH}`):this.setMsgCharCounters(`${t.length}/${w.MAX_CHARS_LENGTH}`):this.setMsgCharCounters()}moveToChatScreen(){this.isWelcomeScreen&&(this.setMsgCharCounters(),this.welcomeScreen.classList.add("hidden"),this.chatScreen.classList.remove("hidden"),this.isWelcomeScreen=!1)}moveToWelcomeScreen(){this.setMsgCharCounters(),this.welcomeScreen.classList.remove("hidden"),this.chatScreen.classList.add("hidden"),this.isWelcomeScreen=!0}setMsgCharCounters(e=""){this.isNewLayout||(e===""?this.suggestionsContainer.style.marginTop="38px":this.suggestionsContainer.style.marginTop="23px",this.msgCharCounter.forEach(t=>{t.textContent=e}))}async onMessageSent(e,t){if(e){this.isMessageBeingSent=!0,this.moveToChatScreen(),this.disableInput(!0),this.sendDyEvent(b.MESSAGE_SENT),this.sendClientMessageToChat(e),this.setMsgCharCounters(),this.messageInputs[t].value="",this.startLoader(),this.scrollToBottom();const s=await this.fetchChatData(e);s&&this.sendServerMessagesToChat(s),this.stopLoader()}}async onShowSimilarClick(e){var s,d,n;this.isMessageBeingSent=!0,this.moveToChatScreen(),this.showStartAgain(),this.startLoader(),this.scrollToBottom();const t=await this.fetchShowSimilar(e);t!=null&&t.assistant&&(this.similarItemsResponse&&(t.assistant=this.similarItemsResponse),(n=(d=(s=t==null?void 0:t.recommend_widgets)==null?void 0:s[0])==null?void 0:d.slots)==null||n.unshift({item:e}),this.sendServerMessagesToChat(t)),this.stopLoader()}delay(e){return new Promise(t=>setTimeout(t,e))}async sendServerMessagesToChat(e,t=!0){const{recommend_widgets:s,assistant:d}=e;if(this.isMessageBeingSent&&t&&(this.createSystemMessage(d),this.startLoader(1e3),this.scrollToBottom()),s){const n=s.length;for(let i=0;this.isMessageBeingSent&&i<n;i++){const r=s[i];this.createGallery(r),++this.galleryCounter,this.startLoader(1e3),this.scrollToBottom(),i<n-1&&await this.delay(2e3)}}this.disableInput(!1),this.messageInputs[1].focus(),this.isMessageBeingSent=!1}scrollToBottom(){this.messagesList&&this.messagesList.lastChild instanceof HTMLElement&&this.messagesList.lastChild.scrollIntoView({behavior:"smooth"})}createGallery(e){this.createGalleryContainer(e),this.createGalleryItems(e.slots)}createGalleryContainer(e){const t=document.createElement("li");t.classList.add("dy-muse-message-item","left","gallery","hidden"),t.setAttribute("data-gallery-id",`${this.galleryCounter}`);const s=document.createElement("div");s.className="dy-muse-message-gallery",s.setAttribute("data-gallery-id",`${this.galleryCounter}`);const d=document.createElement("div");d.className="dy-muse-message-gallery-title",d.textContent=e.title;const n=document.createElement("div");n.className="dy-muse-message-gallery-btn dy-prev",n.setAttribute("data-gallery-id",`${this.galleryCounter}`),n.innerHTML=`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.4086 19.5804C11.7292 19.8427 12.2017 19.7955 12.464 19.4749C12.7263 19.1543 12.6791 18.6818 12.3585 18.4195L4.06873 11.637C3.70505 11.3394 3.91546 10.75 4.38535 10.75L18.8836 10.75C19.2978 10.75 19.6336 10.4142 19.6336 10C19.6336 9.58579 19.2978 9.25 18.8836 9.25L4.38529 9.25C3.9154 9.25 3.705 8.66057 4.06867 8.36302L12.3585 1.58045C12.6791 1.31815 12.7263 0.845633 12.464 0.525049C12.2017 0.204466 11.7292 0.157213 11.4086 0.41951L0.787011 9.10993C0.224644 9.57005 0.22464 10.4299 0.787011 10.89L11.4086 19.5804Z"
    fill="#68697B"/>
    </svg>`;const i=document.createElement("ul");i.className="dy-muse-message-gallery-container",i.setAttribute("data-gallery-id",`${this.galleryCounter}`),i.setAttribute("data-dy-widget-id",this.widgetId),i.setAttribute("data-dy-feed-id",this.feedId);const r=document.createElement("div");r.className="dy-muse-message-gallery-btn dy-next",r.setAttribute("data-gallery-id",`${this.galleryCounter}`);const l=`
    <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.09019 0.419555C8.7696 0.157259 8.29708 0.204511 8.03479 0.525094C7.77249 0.845678 7.81975 1.31819 8.14033 1.58049L16.4301 8.36302C16.7938 8.66057 16.5834 9.25 16.1135 9.25H1.61523C1.20102 9.25 0.865234 9.58579 0.865234 10C0.865234 10.4142 1.20102 10.75 1.61523 10.75H16.1135C16.5834 10.75 16.7938 11.3394 16.4301 11.637L8.14033 18.4196C7.81975 18.6819 7.77249 19.1544 8.03479 19.475C8.29708 19.7955 8.7696 19.8428 9.09019 19.5805L19.7118 10.8901C20.2742 10.43 20.2742 9.57009 19.7118 9.10997L9.09019 0.419555Z"
        fill="#68697B"/>
    </svg>
    `;r.innerHTML=l,s.appendChild(d),s.appendChild(n),s.appendChild(i),s.appendChild(r),t.appendChild(s),n.style.display="none",this.isMobile?i.style.overflowX="auto":i.style.overflowX="hidden";const c=()=>{const{clientWidth:m,scrollWidth:h,scrollLeft:g}=i;n.style.display=g>0?"flex":"none",r.style.display=m+Math.round(g)<h?"flex":"none"};e.slots.length>4?(i.addEventListener("scroll",()=>{c()}),r.addEventListener("click",()=>{i.scrollBy({left:900})}),n.addEventListener("click",()=>{i.scrollBy({left:-900})})):r.style.display="none",this.messagesList.appendChild(t)}createWelcomeItemsToContainer(e,t){const s=`
 <svg width="25" height="25" viewBox="0 0 26 25" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20.0147 4.87604L20.3873 4.07904L21.2126 3.71925C21.3966 3.63727 21.3966 3.38679 21.2126 3.30481L20.3873 2.94502L20.0147 2.14347C19.9298 1.96585 19.6704 1.96585 19.5855 2.14347L19.2129 2.94047L18.3828 3.30026C18.1989 3.38223 18.1989 3.63272 18.3828 3.7147L19.2082 4.07448L19.5808 4.87604C19.6657 5.05366 19.9298 5.05366 20.0147 4.87604ZM16.2604 5.55918L15.5105 3.96518C15.3454 3.60995 14.8172 3.60995 14.6521 3.96518L13.9022 5.55918L12.2515 6.28331C11.8836 6.44727 11.8836 6.95279 12.2515 7.11219L13.9022 7.83633L14.6521 9.43033C14.8219 9.78556 15.3454 9.78556 15.5105 9.43033L16.2604 7.83633L17.9112 7.11219C18.279 6.94824 18.279 6.44271 17.9112 6.28331L16.2604 5.55918ZM19.5808 8.51947L19.2082 9.31647L18.3828 9.67626C18.1989 9.75824 18.1989 10.0087 18.3828 10.0907L19.2082 10.4505L19.5808 11.252C19.6657 11.4297 19.9251 11.4297 20.01 11.252L20.3825 10.455L21.2126 10.0953C21.3966 10.0133 21.3966 9.76279 21.2126 9.68081L20.3873 9.32102L20.0147 8.51947C19.9298 8.34185 19.6657 8.34185 19.5808 8.51947Z" fill="#212125"/>
<path d="M10.5518 5.63342C10.5518 5.35279 10.32 5.12526 10.0407 5.1527C6.34333 5.516 3.51493 8.85937 3.99268 12.7457C4.34684 15.6623 6.65934 18.079 9.55518 18.5686C11.6698 18.9228 13.6593 18.2769 15.1177 17.0269L15.3989 17.3186V18.1415L19.826 22.5686C20.2531 22.9957 20.951 22.9957 21.3781 22.5686C21.8052 22.1415 21.8052 21.4436 21.3781 21.0165L16.9614 16.579H16.1385L15.8468 16.2978C16.8784 15.0942 17.4985 13.5289 17.4847 11.83C17.4825 11.5685 17.2632 11.3668 17.0016 11.3668H15.8958C15.6153 11.3668 15.3989 11.611 15.3989 11.8915C15.3989 14.4853 13.3052 16.579 10.7114 16.579C8.11768 16.579 6.02393 14.4853 6.02393 11.8915C6.02393 9.51542 7.78101 7.55894 10.0699 7.2473C10.3371 7.21092 10.5518 6.99269 10.5518 6.72302L10.5518 5.63342Z" fill="#212125"/>
</svg>
`,d=`<svg width="20" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.31384 6.01233C5.57842 5.95445 4.84132 6.10107
4.18404 6.43598C3.52675 6.77088 2.97488 7.28102 2.58944 7.91001C2.204 8.53899 2 9.26231 2
10C2 10.7377 2.204 11.461 2.58944 12.09C2.97488 12.719 3.52675 13.2291 4.18404 13.564C4.84132 13.8989 5.57842 14.0455
6.31384 13.9877C7.04925 13.9298 7.75434 13.6697 8.35114 13.2361C8.68625 12.9926 9.15527 13.0669
9.39874 13.402C9.64221 13.7371 9.56792 14.2061 9.23282 14.4496C8.41221 15.0458 7.44272 15.4035 6.43153
15.483C5.42033 15.5626 4.40682 15.361 3.50305 14.9005C2.59928 14.44 1.84046 13.7386 1.31048 12.8737C0.780497 12.0089 0.5 11.0143
0.5 10C0.5 8.98568 0.780497 7.99111 1.31048 7.12626C1.84046 6.26141 2.59928 5.55996 3.50305 5.09947C4.40682 4.63897 5.42033 4.43737 6.43152 4.51696C7.44272 4.59654 8.41221 4.9542 9.23282 5.55041C9.56792 5.79388 9.64221 6.2629 9.39874 6.59801C9.15527 6.93312 8.68625 7.0074 8.35114 6.76393C7.75434 6.33033 7.04925 6.07021 6.31384 6.01233Z"
fill="#68697B"/>
<circle cx="15" cy="10" r="5.5" fill="var(--dy-dark2)"/>
</svg>`;e.forEach(n=>{if(n!=null&&n.suggestion){const u=document.createElement("li");u.classList.add("dy-muse-grid-item","suggestion");const y=document.createElement("div");y.classList.add("suggestion-container");const v=document.createElement("div");v.innerHTML=s,y.appendChild(v),y.innerHTML+=n.suggestion,u.appendChild(y),t.appendChild(u),u.addEventListener("click",()=>{this.onMessageSent(n.suggestion,0)});return}const{item:i,strId:r}=n,l=document.createElement("li");l.classList.add("dy-muse-message-gallery-item"),l.classList.add("dy-muse-grid-item"),l.classList.add("product"),l.setAttribute("data-dy-product-id",i.sku),l.setAttribute("data-dy-product-url",i.url),l.setAttribute("data-dy-group-id",i.group_id),l.setAttribute("data-dy-strategy-id",r);const c=document.createElement("div");c.classList.add("dy-muse-message-gallery-item-image");const m=document.createElement("img");m.setAttribute("draggable","false"),m.setAttribute("src",i.image_url);const h=document.createElement("label");h.classList.add("dy-muse-show-similiar-text"),h.textContent="Show Similar";const g=document.createElement("div");g.className="dy-muse-show-similiar-container",g.innerHTML=d,c.appendChild(h),c.appendChild(m),c.appendChild(g),l.appendChild(c),g.addEventListener("click",()=>{console.log("click"),this.isMessageBeingSent=!1,this.sendDyEvent(b.SIMILARITY_CLICK),this.onShowSimilarClick(i)}),g.addEventListener("mouseenter",()=>{!this.isMobile&&h.classList.add("show")}),g.addEventListener("mouseleave",()=>{!this.isMobile&&h.classList.remove("show")}),m.addEventListener("click",()=>{this.sendDyEvent(b.PRODUCT_CLICK),this.selectedItem=i,this.isQuickViewEnabled?this.handleQuickViewClicked(i):(this.completeTheLock(i),window.open(i.url,"_blank"))}),t.appendChild(l)})}createGalleryItemsToContainer(e,t){const s=`<svg width="20" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.31384 6.01233C5.57842 5.95445 4.84132 6.10107
4.18404 6.43598C3.52675 6.77088 2.97488 7.28102 2.58944 7.91001C2.204 8.53899 2 9.26231 2
10C2 10.7377 2.204 11.461 2.58944 12.09C2.97488 12.719 3.52675 13.2291 4.18404 13.564C4.84132 13.8989 5.57842 14.0455
6.31384 13.9877C7.04925 13.9298 7.75434 13.6697 8.35114 13.2361C8.68625 12.9926 9.15527 13.0669
9.39874 13.402C9.64221 13.7371 9.56792 14.2061 9.23282 14.4496C8.41221 15.0458 7.44272 15.4035 6.43153
15.483C5.42033 15.5626 4.40682 15.361 3.50305 14.9005C2.59928 14.44 1.84046 13.7386 1.31048 12.8737C0.780497 12.0089 0.5 11.0143
0.5 10C0.5 8.98568 0.780497 7.99111 1.31048 7.12626C1.84046 6.26141 2.59928 5.55996 3.50305 5.09947C4.40682 4.63897 5.42033 4.43737 6.43152 4.51696C7.44272 4.59654 8.41221 4.9542 9.23282 5.55041C9.56792 5.79388 9.64221 6.2629 9.39874 6.59801C9.15527 6.93312 8.68625 7.0074 8.35114 6.76393C7.75434 6.33033 7.04925 6.07021 6.31384 6.01233Z"
fill="#68697B"/>
<circle cx="15" cy="10" r="5.5" fill="var(--dy-dark2)"/>
</svg>`;e.forEach(d=>{const{item:n,strId:i}=d,r=document.createElement("li");r.classList.add("dy-muse-message-gallery-item"),r.setAttribute("data-dy-product-id",n.sku),r.setAttribute("data-dy-product-url",n.url),r.setAttribute("data-dy-group-id",n.group_id),r.setAttribute("data-dy-strategy-id",i);const l=document.createElement("div");l.classList.add("dy-muse-message-gallery-item-image");const c=document.createElement("img");c.setAttribute("height","202px"),c.setAttribute("width","158px"),c.setAttribute("draggable","false"),c.setAttribute("src",n.image_url);const m=document.createElement("label");m.classList.add("dy-muse-show-similiar-text"),m.textContent="Show Similar";const h=document.createElement("div");h.classList.add("dy-muse-message-gallery-item-name"),h.textContent=n[this.primaryProductText];const g=document.createElement("div");g.classList.add("dy-muse-message-gallery-item-prices");const u=n[this.previousPriceColumn],y=n[this.priceField];if(this.previousPriceColumn&&u>y){const S=document.createElement("div");S.classList.add("dy-muse-message-gallery-item-original-price"),S.textContent=H(this.priceFormat,u,this.currency),g.appendChild(S)}const v=document.createElement("div");v.classList.add("dy-muse-message-gallery-item-price"),v.textContent=H(this.priceFormat,y,this.currency),g.appendChild(v);const x=document.createElement("div");x.className="dy-muse-show-similiar-container",x.innerHTML=s,l.appendChild(m),l.appendChild(c),l.appendChild(x),r.appendChild(l),r.appendChild(h),r.appendChild(g),x.addEventListener("click",()=>{this.isMessageBeingSent=!1,this.sendDyEvent(b.SIMILARITY_CLICK),this.onShowSimilarClick(n)}),x.addEventListener("mouseenter",()=>{!this.isMobile&&m.classList.add("show")}),x.addEventListener("mouseleave",()=>{!this.isMobile&&m.classList.remove("show")}),c.addEventListener("click",()=>{this.sendDyEvent(b.PRODUCT_CLICK),this.isQuickViewEnabled?this.handleQuickViewClicked(n):window.open(n.url,"_blank")}),t.appendChild(r)})}createGalleryItems(e){const t=this.messagesList.querySelector(`.dy-muse-message-gallery-container[data-gallery-id="${this.galleryCounter}"]`);this.createGalleryItemsToContainer(e,t);const s=this.messagesList.querySelectorAll(`.dy-muse-message-gallery-container[data-gallery-id="${this.galleryCounter}"] img`),d=s.length;let n=0;for(const i of s){const r=this.galleryCounter;i.addEventListener("load",()=>{n++,n===d&&this.onAllImagesLoaded(r)}),i.addEventListener("error",()=>{console.error(`Error loading image: ${i.src}`),i.src=`data:image/svg+xml,${encodeURIComponent(`
        <svg width="168" height="202" viewBox="0 0 168 202" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="4" width="168" height="202" rx="3" fill="#E4E8F0" />
        <path d="M101.201 117.156V88.8452C101.201 86.6208 99.3808 84.8008 97.1563 84.8008H68.8452C66.6208 84.8008 64.8008 86.6208 64.8008 88.8452V117.156C64.8008 119.381 66.6208 121.201 68.8452 121.201H97.1563C99.3808 121.201 101.201 119.381 101.201 117.156ZM75.3273 106.8C75.6332 106.407 76.2246 106.397 76.543 106.781L80.3579 111.374C80.6765 111.757 81.2684 111.748 81.5741 111.354L87.4295 103.808C87.7451 103.402 88.361 103.407 88.6698 103.819L96.2203 113.886C96.606 114.4 96.2391 115.134 95.5963 115.134H70.44C69.791 115.134 69.4259 114.388 69.8243 113.875L75.3273 106.8Z"
            fill="#A4A4B6" /></svg>
        `)}`,n++,n===d&&this.onAllImagesLoaded(r)})}}handleMobileScreen(){document.querySelectorAll(".dy-muse-message-gallery").forEach(t=>{const s=t.querySelector(".dy-muse-message-gallery-container");s.style.removeProperty("overflow-x"),setTimeout(()=>{this.isMobile?s.style.overflowX="auto":s.style.overflowX="hidden"},500)})}showStartAgain(){this.isStartAgainShown||(this.startAgainBtn.classList.remove("hidden"),this.isStartAgainShown=!0)}hideStartAgain(){this.startAgainBtn.classList.add("hidden")}startWelcomePageLoader(){var t;const e=document.createElement("span");e.className="main-loader",(t=this.suggestionsList)==null||t.appendChild(e)}stopWelcomePageLoader(){var t;const e=(t=this.suggestionsList)==null?void 0:t.querySelector(".main-loader");e&&this.suggestionsList.removeChild(e)}async startLoader(e){if(this.isLoading)return;const t=document.createElement("li");if(t.classList.add("dy-chat-loader"),t.innerHTML='<div class="dy-muse-dot-flashing"><div class="dot-flashing"></div></div>',this.messagesList.appendChild(t),this.isLoading=!0,e)return new Promise(s=>{setTimeout(()=>{this.isLoading=!1,this.stopLoader(),s()},e)})}stopLoader(){const e=this.messagesList.querySelector(".dy-chat-loader");e&&(this.isLoading=!1,this.messagesList.removeChild(e))}removeItems(e){const t=Array.from(e.children);t.forEach(s=>{s.style.opacity="0",s.style.pointerEvents="none"}),setTimeout(()=>{t.forEach(s=>{this.messagesList.removeChild(s)})},100),this.isStartAgainShown=!1}handleInputLineHeight(e){if(!this.isNewLayout){if(e.value===""){e.style.height=`${w.INPUT_LINE_HEIGHT}px`,e.parentElement.style.height=e.style.height;return}e.scrollHeight<62?e.style.height=`${w.INPUT_LINE_HEIGHT}px`:e.scrollHeight>=62&&e.scrollHeight<82?e.style.height="62px":e.style.height="82px",e.parentElement.style.height=e.style.height}}notifyContextChanged(){this.closeChatHandler()}onAllImagesLoaded(e){this.stopLoader();const t=this.messagesList.querySelector(`.dy-muse-message-item.left.gallery[data-gallery-id="${e}"]`);t&&(t.classList.remove("hidden"),this.scrollToBottom())}isMobileScreenSize(){return window.matchMedia("(max-width: 768px)").matches}async fetchChatData(e){var n,i,r,l,c;this.requestStack=[...this.requestStack,{content:e,role:"user"}];const t=(l=(r=(i=(n=window==null?void 0:window.DYO)==null?void 0:n.rcom)==null?void 0:i.widgets)==null?void 0:r[this.widgetId])==null?void 0:l.rules,s=(t==null?void 0:t.map(k))||[],d={chat:this.requestStack,ctx:this.ctx,ctx_type:this.ctxType,feed_id:this.feedId,geoLocation:{geoCode:this.geoCode,geoRegionCode:this.geoRegionCode},rules:s,widget_id:this.widgetId};try{const m=await fetch(`${this.museApiUrl}/completion?section_id=${this.sectionId}`,B(d,this.dyid)),h=await m.json();if(!m.ok){m.status===429?this.handleServerErrorResponse():this.handleServerErrorResponse(h.description),(c=this.requestStack)==null||c.pop();return}return this.requestStack=[...this.requestStack,{content:h.chat.raw_content,role:"assistant"}],h.chat}catch{this.handleServerErrorResponse();return}}handleSpecificError(e){this.createSystemMessage(e),this.stopLoader(),this.disableInput(!1),this.messageInputs[1].focus()}handleServerErrorResponse(e=$.SOMETHING_WENT_WRONG){this.createSystemMessage(e),this.stopLoader(),this.disableInput(!1),this.messageInputs[1].focus()}async fetchShowSimilar(e){var r,l,c,m;const{sku:t,name:s}=e,d=(m=(c=(l=(r=window==null?void 0:window.DYO)==null?void 0:r.rcom)==null?void 0:l.widgets)==null?void 0:c[this.widgetId])==null?void 0:m.rules,n=(d==null?void 0:d.map(k))||[],i={ctx:this.ctx,ctx_type:this.ctxType,feed_id:this.feedId,geoLocation:{geoCode:this.geoCode,geoRegionCode:this.geoRegionCode},product_name:s,rules:n,section_id:this.sectionId,sku:t,widget_id:this.widgetId};try{const h=await fetch(`${this.museApiUrl}/similar?section_id=${this.sectionId}`,B(i,this.dyid));if(!h.ok){this.handleServerErrorResponse(h==null?void 0:h.description);return}return(await h.json()).chat}catch{this.handleServerErrorResponse();return}}}return E=new WeakSet,D=function(){console.log("event fired"),this.dispatchEvent(new CustomEvent("onclose"))},Z}();

export default ShoppingMuse